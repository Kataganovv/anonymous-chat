<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-qr {
            text-align: center;
            margin: 20px 0;
        }
        .qr-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .qr-link {
            background: #667eea;
            color: white;
            padding: 15px;
            text-decoration: none;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .qr-link:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞</h1>
    
    <div class="test-section">
        <h2>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
        <div id="systemStatus">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
    </div>
    
    <div class="test-section">
        <h2>üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</h2>
        <div class="qr-links">
            <a href="/qr-generator.html" class="qr-link">üì± –û—Å–Ω–æ–≤–Ω–æ–π QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a>
            <a href="/qr-simple.html" class="qr-link">‚ö° –ü—Ä–æ—Å—Ç–æ–π QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a>
            <a href="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=https://katagan-chat.surge.sh" class="qr-link">üåç –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ Google</a>
        </div>
    </div>
    
    <div class="test-section">
        <h2>üéØ –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR</h2>
        <input type="text" id="testUrl" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è —Ç–µ—Å—Ç–∞" value="https://katagan-chat.surge.sh" style="width: 100%; padding: 10px; margin: 10px 0;">
        <button onclick="testQR()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px;">–¢–µ—Å—Ç QR</button>
        <div class="test-qr" id="testResult"></div>
    </div>
    
    <div class="test-section">
        <h2>üìã –í—Å–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞</h2>
        <ul style="list-style: none; padding: 0;">
            <li>üè† <a href="/">–û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç</a></li>
            <li>üì± <a href="/connect.html">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</a></li>
            <li>üéØ <a href="/qr-generator.html">QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a></li>
            <li>üß™ <a href="/mobile-test.html">–¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</a></li>
            <li>üîó <a href="/share-test.html">–¢–µ—Å—Ç —à–∞—Ä–∏–Ω–≥–∞</a></li>
        </ul>
    </div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
        function checkSystemStatus() {
            const statusDiv = document.getElementById('systemStatus');
            let status = '';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Google Charts
            const testImg = new Image();
            testImg.onload = () => {
                status += '<div class="status success">‚úÖ Google Charts API –¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                updateStatus();
            };
            testImg.onerror = () => {
                status += '<div class="status error">‚ùå Google Charts API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                updateStatus();
            };
            testImg.src = 'https://chart.googleapis.com/chart?chs=50x50&cht=qr&chl=test';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
            if (navigator.onLine) {
                status += '<div class="status success">‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ</div>';
            } else {
                status += '<div class="status error">‚ùå –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Canvas
            const canvas = document.createElement('canvas');
            if (canvas.getContext) {
                status += '<div class="status success">‚úÖ Canvas –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</div>';
            } else {
                status += '<div class="status error">‚ùå Canvas –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</div>';
            }
            
            function updateStatus() {
                statusDiv.innerHTML = status;
            }
            
            updateStatus();
        }
        
        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR
        function testQR() {
            const url = document.getElementById('testUrl').value;
            const resultDiv = document.getElementById('testResult');
            
            if (!url) {
                resultDiv.innerHTML = '<div class="status error">‚ùå –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É</div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="status info">üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º QR –∫–æ–¥...</div>';
            
            const qrUrl = `https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=${encodeURIComponent(url)}`;
            const img = new Image();
            
            img.onload = () => {
                resultDiv.innerHTML = `
                    <div class="status success">‚úÖ QR –∫–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</div>
                    <img src="${qrUrl}" alt="QR Code" style="border: 2px solid #667eea; border-radius: 10px;">
                    <br><br>
                    <a href="${qrUrl}" download="qr-code.png" style="background: #10b981; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">üì• –°–∫–∞—á–∞—Ç—å</a>
                `;
            };
            
            img.onerror = () => {
                resultDiv.innerHTML = '<div class="status error">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å QR –∫–æ–¥</div>';
            };
            
            img.src = qrUrl;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            checkSystemStatus();
        });
    </script>
</body>
</html>